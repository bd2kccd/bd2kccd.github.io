<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://bd2kccd.github.io/docs/r-causal/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>R-causal - CCD Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "R-causal";
        var mkdocs_page_input_path = "r-causal.md";
        var mkdocs_page_url = "/docs/r-causal/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "UA-60897872-2", "bd2kccd.github.io");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CCD Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome to CCD Docs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../tetrad/">Tetrad</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../causal-cmd/">Causal Cmd</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../causal-web/">Causal Web</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../causal-rest-api/">Causal REST API</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../py-causal/">Py-causal</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">R-causal</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#r-library-requirement">R Library Requirement</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#docker">Docker</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example">Example</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#continuous-dataset">Continuous Dataset</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#discrete-dataset">Discrete Dataset</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prior-knowledge">Prior Knowledge</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#create-priorknowledge-object">Create PriorKnowledge Object</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#load-knowledge-file">Load Knowledge File</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#plot-a-dot-graph">Plot a DOT graph</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#useful-rjava-trouble-shooting-installation-in-mac-os-x-links">Useful rJava Trouble-shooting Installation in Mac OS X Links</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cytoscape-tetrad/">Cytoscape Tetrad Plugin</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ccd-annotations-cytoscape/">CCD Annotations Cytoscape Plugin</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CCD Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">R-causal</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="r-causal">r-causal</h1>
<p><a href="https://github.com/bd2kccd/r-causal">R Wrapper</a> for Tetrad Library</p>
<p>Note 2023-03-06: This version of RCausal uses an older version of Tetrad from at least 5 years ago. However, we have updated our Python integration to a much better version--see <a href="https://github.com/cmu-phil/py-tetrad">https://github.com/cmu-phil/py-tetrad</a>. Updating our R integration is one of the next projects we will take up.</p>
<p>News 2023-04-05: We have put forward a proposal to replace the r-causal functionality using the py-tetrad functionality, here: <a href="https://github.com/cmu-phil/py-tetrad/tree/main/pytetrad/R">https://github.com/cmu-phil/py-tetrad/tree/main/pytetrad/R</a>. The installation procedure for this is still somewhat complicated, and we will try to simplify it. If you try it and and have difficulties, please let us know. Once you have it installed, it is very easy and intuitive to use.</p>
<p>By the way, rcausal has not been maintained for some time now, as the tireless maintainer has since moved on to different work :-)... but going back through some of the issues posted for r-causal gives some hints as to additional functionality that pytetrad/R should have. We'll try to get caught up.</p>
<h2 id="r-library-requirement">R Library Requirement</h2>
<p>R &gt;= 3.3.0, 
<a href="https://cran.r-project.org/web/packages/stringr/">stringr</a>,
<a href="https://cran.r-project.org/web/packages/rJava/index.html">rJava</a>, </p>
<h2 id="docker">Docker</h2>
<p>As an alternative to installing the library and getting rJava working with your installation (i.e., does not work well on mac) we have a <a href="https://hub.docker.com/r/chirayukong/r-causal-rstudio/">Docker image</a></p>
<h2 id="installation">Installation</h2>
<ul>
<li>Install the R library requirements:</li>
</ul>
<pre><code class="language-R">install.packages(&quot;stringr&quot;)
install.packages(&quot;rJava&quot;)
</code></pre>
<ul>
<li>Install r-causal from github:</li>
</ul>
<pre><code class="language-R">library(devtools)
install_github(&quot;bd2kccd/r-causal&quot;)
</code></pre>
<h2 id="example">Example</h2>
<h3 id="continuous-dataset">Continuous Dataset</h3>
<pre><code class="language-R">library(rcausal)
data(&quot;charity&quot;)   #Load the charity dataset

tetradrunner.getAlgorithmDescription(algoId = 'fges')
tetradrunner.getAlgorithmParameters(algoId = 'fges',scoreId = 'fisher-z')
#Compute FGES search
tetradrunner &lt;- tetradrunner(algoId = 'fges',df = charity,scoreId = 'fisher-z',
dataType = 'continuous',alpha=0.1,faithfulnessAssumed=TRUE,maxDegree=-1,verbose=TRUE)

tetradrunner$nodes #Show the result's nodes
tetradrunner$edges #Show the result's edges
</code></pre>
<h3 id="discrete-dataset">Discrete Dataset</h3>
<pre><code class="language-R">library(rcausal)
data(&quot;audiology&quot;)    #Load the charity dataset

tetradrunner.getAlgorithmParameters(algoId = 'fges',scoreId = 'bdeu')
#Compute FGES search
tetradrunner &lt;- tetradrunner(algoId = 'fges',df = audiology,scoreId = 'bdeu',dataType = 'discrete',
alpha=0.1,faithfulnessAssumed=TRUE,maxDegree=-1,verbose=TRUE)

tetradrunner$nodes #Show the result's nodes
tetradrunner$edges #Show the result's edges
</code></pre>
<h3 id="prior-knowledge">Prior Knowledge</h3>
<h4 id="create-priorknowledge-object">Create PriorKnowledge Object</h4>
<pre><code class="language-R">forbid &lt;- list(c('TangibilityCondition','Impact')) # List of forbidden directed edges
require &lt;- list(c('Sympathy','TangibilityCondition')) # List of required directed edges
forbiddenWithin &lt;- c('TangibilityCondition','Imaginability')
class(forbiddenWithin) &lt;- 'forbiddenWithin' # Make this tier forbidden within
temporal &lt;- list(forbiddenWithin, c('Sympathy','AmountDonated'),c('Impact')) # List of temporal node tiers
prior &lt;- priorKnowledge(forbiddirect = forbid, requiredirect = require, addtemporal = temporal)
fgs &lt;- fgs(df = charity, penaltydiscount = 2, depth = -1, ignoreLinearDependence = TRUE, 
heuristicSpeedup = TRUE, numOfThreads = 2, verbose = TRUE, priorKnowledge = prior)
</code></pre>
<h4 id="load-knowledge-file">Load Knowledge File</h4>
<pre><code class="language-R"># knowledge file: audiology.prior
# /knowledge
# forbiddirect
# class tymp
# class age_gt_60
# class notch_at_4k
# 
# requiredirect
# history_noise class
#
# addtemporal
# 0* bser late_wave_poor tymp notch_at_4k o_ar_c ar_c airBoneGap air bone o_ar_u airBoneGap
# 1 history_noise history_dizziness history_buzzing history_roaring history_recruitment history_fluctuating history_heredity history_nausea
# 2 class

prior &lt;- priorKnowledgeFromFile('audiology.prior')
fgs.discrete &lt;- fgs.discrete(df=audiology,structurePrior=1.0,samplePrior=1.0, 
depth = -1, heuristicSpeedup = TRUE, numOfThreads = 2,verbose = TRUE, priorKnowledge = prior)
</code></pre>
<h3 id="plot-a-dot-graph">Plot a DOT graph</h3>
<pre><code class="language-R">library(DOT)
graph_dot &lt;- tetradrunner.tetradGraphToDot(tetradrunner$graph)
dot(graph_dot)
</code></pre>
<h2 id="useful-rjava-trouble-shooting-installation-in-mac-os-x-links">Useful <code>rJava</code> Trouble-shooting Installation in Mac OS X Links</h2>
<ol>
<li><a href="http://stackoverflow.com/questions/26948777/how-can-i-make-rjava-use-the-newer-version-of-java-on-osx/32544358#32544358">http://stackoverflow.com/questions/26948777/how-can-i-make-rjava-use-the-newer-version-of-java-on-osx/32544358#32544358</a></li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../py-causal/" class="btn btn-neutral float-left" title="Py-causal"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../cytoscape-tetrad/" class="btn btn-neutral float-right" title="Cytoscape Tetrad Plugin">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../py-causal/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../cytoscape-tetrad/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
